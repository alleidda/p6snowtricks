{% extends 'base.html.twig' %}

{% block title %}Page de profile de {{ user.lastname }}{% endblock %}

{% block body %}
    <div class="container">

        <div class="card">
            <div class="row">
               {% if app.user %}
                <div class="col-8">
                    <div class="card-title m-3 h3">{{ user.lastname }} {{ user.firstname }}</div>

                    <div class="card-text m-3">

                    
                            <p>Adresse email : <br>
                                {{ user.email }}</p>
                            <hr>
                     


                        <p>Inscrit depuis : {{ user.createdAt|date('d-m-Y') }}</p>
                          

                    </div>
                </div>
                <div class="col-4">
                    <img src="{{ asset(user.picture) }}" alt="Image de {{ user.firstName }} {{ user.lastName }}" class="img-thumbnail m-5 float-right user-profile">
                </div>
            </div>
             {% endif %}

                {% if tricks is not empty %}
                    <h2 class="h4 p-3">Liste des tricks que {{ user.fullname }} a ajouté</h2>
                    <table class="table table-hover">
                        <thead>
                        </thead>
                        <tbody>
                        {% for trick in tricks %}
                            <tr>
                                <td>{{ loop.index }}</td>
                                <td>{{ trick.name }}</td>
                                <td>
                                    <a href="{{ path('tricks_display', {'slug' : trick.slug} ) }}" class="btn btn-primary">Voir</a>
                                </td>
                                 <td>
                                    
                                    {% if app.user and app.user.id == app.request.attributes.get('id') %}
                                    <a href="{# {{ path('trick_delete', {'id': trick.id}) }} #}" class="btn btn-danger">Supprimer</a>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                {% endif %}



                {% if user.getComments is not empty %}
                    <h2 class="h4 p-3">Liste des commentaires que {{ user.fullname }} a écrit</h2>
                    <table class="table table-hover">
                        <thead>
                        </thead>
                        <tbody>
                        {% for comment in user.getComments %}
                            <tr>
                                <td>{{ loop.index }}</td>
                                <td>{{ comment.trick.name }}</td>
                                <td>{{ comment.content|slice(0,50) }} ...</td>
                                <td>{{ comment.createdAt|date('d/m/Y H:i') }}</td>
                                <td>
                                    <a href="{{ path('tricks_display', {'slug': comment.trick.slug}) }}" class="btn btn-primary">Voir</a>
                                    {% if app.user and app.user.id == app.request.attributes.get('id') %}
                                    <a href="{{ path('comment_delete', {'id': comment.id}) }}" class="btn btn-danger">Supprimer</a>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                {% endif %}

            {# <div class="card-link p-3">
                {% if app.user and app.user.id == app.request.attributes.get('id') %}
                    <a href="{{ path("account_update") }}" class="btn btn-success">Modifier le profile</a>
                {% endif %}
            </div> #}
        </div>
    </div>
{% endblock %}
